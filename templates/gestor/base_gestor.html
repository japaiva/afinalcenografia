{% extends 'base.html' %}

{% block title %}Portal do Gestor | Afinal Cenografia{% endblock %}

{% block navbar_title %}
<span class="app-title-text">Portal do Gestor</span>
{% endblock %}


{% block nav_items %}
<li class="nav-item">
  <a class="nav-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}" href="{% url 'gestor:dashboard' %}">
  </a>
</li>

<!-- Divisor vertical -->
<li class="nav-item">
  <span class="nav-link" style="border-left: 2px solid #60a5fa; height: 24px; margin: 8px 15px;"></span>
</li>

<!-- Menu de Configurações -->
<li class="nav-item dropdown">
  <a class="nav-link dropdown-toggle {% if 'empresa' in request.resolver_match.url_name or 'usuario' in request.resolver_match.url_name or 'parametro' in request.resolver_match.url_name %}active{% endif %}" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Configurações
  </a>
  <ul class="dropdown-menu dropdown-menu-dark">
    <!-- Seção de Empresas -->
     <!--  <li><h6 class="dropdown-header">Cadastros</h6></li>-->
    <li><a class="dropdown-item" href="{% url 'gestor:empresa_list' %}">
      Empresas
    </a></li>
    <li><a class="dropdown-item" href="{% url 'gestor:usuario_list' %}">
        Usuários
    </a></li>
    
    <!--  <li><hr class="dropdown-divider"></li>-->
    
    {% if user.nivel == 'admin' %}
    <li><hr class="dropdown-divider"></li>
    
    <!-- Seção de Parâmetros (apenas para admin) -->
    <li><h6 class="dropdown-header">Parâmetros</h6></li>
    <li><a class="dropdown-item" href="{% url 'gestor:parametro_list' %}">
      Gerenciar Parâmetros
    </a></li>
    {% endif %}
  </ul>
</li>

<!-- Menu de Projetos -->
<li class="nav-item dropdown">
  <a class="nav-link dropdown-toggle {% if 'projeto' in request.resolver_match.url_name %}active{% endif %}" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
     Projetos
  </a>
  <ul class="dropdown-menu dropdown-menu-dark">
    <li><a class="dropdown-item" href="{% url 'gestor:projeto_list' %}">
       Todos os Projetos
    </a></li>
    <li><a class="dropdown-item" href="{% url 'gestor:projeto_list' %}?status=pendente">
       Pendentes
    </a></li>
    <li><a class="dropdown-item" href="{% url 'gestor:projeto_list' %}?status=ativo">
      Ativos
    </a></li>
    <li><a class="dropdown-item" href="{% url 'gestor:projeto_list' %}?status=concluido">
      Concluídos
    </a></li>
  </ul>
</li>

<!-- Menu de Mensagens -->
<li class="nav-item dropdown">
  <a class="nav-link dropdown-toggle {% if 'mensagem' in request.resolver_match.url_name %}active{% endif %}" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
     Mensagens 
    <!-- Badge para notificações não lidas -->
    <span class="badge rounded-pill bg-danger" style="font-size: 0.7rem; position: relative; top: -1px;">3</span>
  </a>
  <ul class="dropdown-menu dropdown-menu-dark">
    <li><a class="dropdown-item" href="{% url 'gestor:mensagens' %}">
        Central de Mensagens
    </a></li>
    <li><a class="dropdown-item" href="{% url 'gestor:nova_mensagem' %}">
        Nova Mensagem
    </a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header">Mensagens Recentes</h6></li>
    <li>
      <a class="dropdown-item d-flex align-items-center" href="#">
        <div class="flex-shrink-0">
          <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center" style="width: 32px; height: 32px;">
            <span class="text-white" style="font-size: 0.8rem;">PR</span>
          </div>
        </div>
        <div class="ms-2 text-truncate" style="max-width: 200px;">
          <div class="small fw-bold">Projeto Evento Corporativo</div>
          <div class="text-light small">João Silva: Precisamos ajustar...</div>
        </div>
      </a>
    </li>
  </ul>
</li>



{% endblock %}