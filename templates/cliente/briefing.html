{% extends 'cliente/base_cliente.html' %}
{% load static %}

{% block title %}Novo Projeto - Briefing | Portal do Cliente{% endblock %}

{% block content %}
<div class="card shadow">
  <div class="card-header bg-light d-flex justify-content-between align-items-center">
    <h5 class="card-title mb-0">
      <i class="fas fa-clipboard-list me-2"></i> Briefing de Projeto
    </h5>
    <div>
      <button id="salvarRascunho" class="btn btn-outline-secondary btn-sm me-1">
        <i class="fas fa-save me-1"></i> Salvar Rascunho
      </button>
      <button id="enviarBriefing" class="btn btn-primary btn-sm" disabled>
        <i class="fas fa-paper-plane me-1"></i> Enviar Briefing
      </button>
    </div>
  </div>
  
  <div class="card-body p-0">
    <div class="row g-0">
      <!-- Formulário de Briefing -->
      <div class="col-lg-8 border-end">
        <div class="p-4">
          <div class="progress mb-4" style="height: 8px;">
            <div class="progress-bar bg-success" role="progressbar" style="width: 40%;" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
          
          <div class="d-flex justify-content-between mb-4">
            <div class="d-flex">
              <button class="btn btn-sm btn-outline-secondary me-2" disabled>
                <i class="fas fa-chevron-left me-1"></i> Anterior
              </button>
              <button class="btn btn-sm btn-outline-primary">
                Próximo <i class="fas fa-chevron-right ms-1"></i>
              </button>
            </div>
            <div class="text-muted">
              Etapa 2 de 5
            </div>
          </div>
          
          <h4 class="mb-3">Informações Básicas do Projeto</h4>
          
          <form>
            <div class="mb-3">
              <label for="nomeProjeto" class="form-label">Nome do Projeto <span class="text-danger">*</span></label>
              <div class="input-group">
                <input type="text" class="form-control" id="nomeProjeto" value="Stand Expo 2025" required>
                <span class="input-group-text bg-success text-white">
                  <i class="fas fa-check-circle"></i>
                </span>
              </div>
              <div class="form-text text-muted">O nome pelo qual o projeto será identificado.</div>
            </div>
            
            <div class="mb-3">
              <label for="categoriaProjeto" class="form-label">Categoria <span class="text-danger">*</span></label>
              <div class="input-group">
                <select class="form-select" id="categoriaProjeto" required>
                  <option value="">Selecione...</option>
                  <option value="1" selected>Evento Corporativo</option>
                  <option value="2">Evento Social</option>
                  <option value="3">Televisão</option>
                  <option value="4">Varejo</option>
                  <option value="5">Teatro</option>
                  <option value="6">Outros</option>
                </select>
                <span class="input-group-text bg-success text-white">
                  <i class="fas fa-check-circle"></i>
                </span>
              </div>
              <div class="form-text text-muted">Categoria principal do projeto.</div>
            </div>
            
            <div class="mb-3">
              <label for="descricaoProjeto" class="form-label">Descrição do Projeto <span class="text-danger">*</span></label>
              <div class="input-group">
                <textarea class="form-control" id="descricaoProjeto" rows="4" required>Stand para a empresa StartupXYZ na Expo Tecnologia 2025. Precisamos de um espaço moderno e inovador para apresentar nossos produtos de tecnologia. Necessitamos de área de demonstração, recepção e espaço para reuniões com potenciais clientes.</textarea>
                <span class="input-group-text bg-warning text-white">
                  <i class="fas fa-exclamation-circle"></i>
                </span>
              </div>
              <div class="form-text text-warning">A IA sugere adicionar mais detalhes como dimensões e estilo visual desejado.</div>
            </div>
            
            <div class="mb-3">
              <label for="objetivoProjeto" class="form-label">Objetivo do Projeto <span class="text-danger">*</span></label>
              <div class="input-group">
                <textarea class="form-control" id="objetivoProjeto" rows="3" required>Apresentar nossas novas soluções de software para automação empresarial e atrair novos clientes e parceiros. Queremos causar uma impressão moderna e tecnológica.</textarea>
                <span class="input-group-text bg-success text-white">
                  <i class="fas fa-check-circle"></i>
                </span>
              </div>
              <div class="form-text text-muted">O que você espera alcançar com este projeto.</div>
            </div>
            
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="dataInicio" class="form-label">Data de Início <span class="text-danger">*</span></label>
                <div class="input-group">
                  <input type="date" class="form-control" id="dataInicio" value="2025-05-10" required>
                  <span class="input-group-text bg-success text-white">
                    <i class="fas fa-check-circle"></i>
                  </span>
                </div>
              </div>
              
              <div class="col-md-6 mb-3">
                <label for="dataFim" class="form-label">Data de Término <span class="text-danger">*</span></label>
                <div class="input-group">
                  <input type="date" class="form-control" id="dataFim" value="2025-05-15" required>
                  <span class="input-group-text bg-success text-white">
                    <i class="fas fa-check-circle"></i>
                  </span>
                </div>
              </div>
            </div>
            
            <div class="mb-3">
              <label for="orcamento" class="form-label">Orçamento Estimado (R$) <span class="text-danger">*</span></label>
              <div class="input-group">
                <span class="input-group-text">R$</span>
                <input type="number" class="form-control" id="orcamento" value="50000" required>
                <span class="input-group-text bg-danger text-white">
                  <i class="fas fa-times-circle"></i>
                </span>
              </div>
              <div class="form-text text-danger">A IA alerta que o orçamento parece insuficiente para um stand com as características descritas.</div>
            </div>
            
            <div class="mb-3">
              <label for="dimensoes" class="form-label">Dimensões Aproximadas (m²) <span class="text-danger">*</span></label>
              <div class="input-group">
                <input type="number" class="form-control" id="dimensoes" value="50" required>
                <span class="input-group-text">m²</span>
                <span class="input-group-text bg-success text-white">
                  <i class="fas fa-check-circle"></i>
                </span>
              </div>
              <div class="form-text text-muted">Área total aproximada do projeto.</div>
            </div>
            
            <div class="mb-3">
              <label for="paletaCores" class="form-label">Paleta de Cores</label>
              <div class="input-group">
                <input type="text" class="form-control" id="paletaCores" value="Azul, branco e cinza (cores da identidade visual da empresa)">
                <span class="input-group-text">
                  <i class="fas fa-circle text-primary"></i>
                  <i class="fas fa-circle text-light ms-1 border"></i>
                  <i class="fas fa-circle text-secondary ms-1"></i>
                </span>
              </div>
              <div class="form-text text-muted">Cores predominantes que devem ser utilizadas no projeto.</div>
            </div>
            
            <div class="mb-3">
              <label for="referencias" class="form-label">Referências Visuais</label>
              <div class="input-group">
                <input type="file" class="form-control" id="referencias" multiple>
                <button class="btn btn-outline-secondary" type="button">Upload</button>
              </div>
              <div class="form-text text-muted">Envie imagens de referência que possam ajudar a equipe a entender seu estilo desejado.</div>
              
              <div class="d-flex flex-wrap gap-2 mt-2">
                <div class="position-relative" style="width: 100px;">
                  <img src="https://via.placeholder.com/100" alt="Referência 1" class="img-thumbnail">
                  <button class="btn btn-sm btn-danger position-absolute top-0 end-0" style="font-size: 0.7rem; padding: 0.1rem 0.3rem;">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
                <div class="position-relative" style="width: 100px;">
                  <img src="https://via.placeholder.com/100" alt="Referência 2" class="img-thumbnail">
                  <button class="btn btn-sm btn-danger position-absolute top-0 end-0" style="font-size: 0.7rem; padding: 0.1rem 0.3rem;">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      
      <!-- Assistente IA -->
      <div class="col-lg-4">
        <div class="p-3 h-100 d-flex flex-column">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="mb-0">
              <i class="fas fa-robot me-2 text-primary"></i> Assistente IA
            </h5>
            <div>
              <button class="btn btn-sm btn-outline-primary" data-bs-toggle="tooltip" title="Iniciar nova conversa">
                <i class="fas fa-sync-alt"></i>
              </button>
            </div>
          </div>
          
          <!-- Chat da IA -->
          <div class="chat-container bg-light rounded p-3 flex-grow-1 overflow-auto mb-3" style="height: 400px;">
            <div class="chat-message ai-message mb-3">
              <div class="chat-bubble">
                <p>Olá! Estou analisando seu briefing em tempo real. Tenho algumas sugestões para ajudar a tornar seu projeto mais completo.</p>
              </div>
              <small class="text-muted">10:15</small>
            </div>
            
            <div class="chat-message ai-message mb-3">
              <div class="chat-bubble">
                <p>Notei que sua descrição do projeto poderia incluir mais detalhes técnicos. Por exemplo:</p>
                <ul>
                  <li>Altura desejada do stand</li>
                  <li>Necessidades específicas de iluminação</li>
                  <li>Requisitos de mobiliário</li>
                  <li>Necessidades de energia/conectividade</li>
                </ul>
                <p>Isso ajudará os projetistas a entenderem melhor suas expectativas.</p>
              </div>
              <small class="text-muted">10:16</small>
            </div>
            
            <div class="chat-message user-message mb-3">
              <div class="chat-bubble">
                <p>Obrigado! Vou adicionar essas informações. Quanto você acha que custaria um stand com essas características?</p>
              </div>
              <small class="text-muted">10:18</small>
            </div>
            
            <div class="chat-message ai-message mb-3">
              <div class="chat-bubble">
                <p>Baseado nos dados de projetos similares, um stand de 50m² com as características que você descreveu geralmente custa entre R$ 75.000 e R$ 90.000, dependendo dos materiais e acabamentos escolhidos.</p>
                <p>Seu orçamento atual de R$ 50.000 pode ser insuficiente para todas as funcionalidades desejadas. Sugiro:</p>
                <ol>
                  <li>Aumentar o orçamento para cerca de R$ 80.000</li>
                  <li>Ou reduzir o escopo/tamanho do projeto</li>
                  <li>Ou optar por materiais mais econômicos</li>
                </ol>
              </div>
              <small class="text-muted">10:20</small>
            </div>
            
            <div class="chat-message user-message mb-3">
              <div class="chat-bubble">
                <p>Entendi! Vou ajustar o orçamento para R$ 85.000. Quais materiais você recomendaria para um stand moderno e tecnológico?</p>
              </div>
              <small class="text-muted">10:22</small>
            </div>
            
            <div class="chat-message ai-message">
              <div class="chat-bubble">
                <p>Excelente escolha! Para um stand moderno e tecnológico, recomendo:</p>
                <ul>
                  <li><strong>Estrutura:</strong> Sistema modular de alumínio com conexões ocultas</li>
                  <li><strong>Paredes:</strong> Painéis de MDF revestidos com laminado de alta pressão ou vinil adesivado</li>
                  <li><strong>Piso:</strong> Piso elevado com acabamento em vinílico de alto tráfego</li>
                  <li><strong>Iluminação:</strong> Sistema de LED com controle RGB para mudança de cores</li>
                  <li><strong>Tecnologia:</strong> Painéis digitais interativos e sistema de som embutido</li>
                </ul>
                <p>Estes materiais oferecem excelente relação custo-benefício e um visual high-tech.</p>
              </div>
              <small class="text-muted">10:24</small>
            </div>
          </div>
          
          <!-- Input do chat -->
          <div class="chat-input">
            <form>
              <div class="input-group">
                <input type="text" class="form-control" placeholder="Faça uma pergunta ao assistente...">
                <button class="btn btn-primary" type="button">
                  <i class="fas fa-paper-plane"></i>
                </button>
              </div>
            </form>
          </div>
        </div>
        
        <!-- Status de Validação -->
        <div class="validation-status p-3 border-top">
          <h6 class="mb-3">Status de Validação</h6>
          <ul class="list-group list-group-flush">
            <li class="list-group-item d-flex justify-content-between align-items-center px-0 border-0">
              <span>
                <i class="fas fa-check-circle text-success me-2"></i> Informações Básicas
              </span>
              <span class="badge bg-success">Completo</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center px-0 border-0">
              <span>
                <i class="fas fa-exclamation-circle text-warning me-2"></i> Orçamento
              </span>
              <span class="badge bg-warning text-dark">Atenção</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center px-0 border-0">
              <span>
                <i class="fas fa-check-circle text-success me-2"></i> Prazos
              </span>
              <span class="badge bg-success">Válido</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center px-0 border-0">
              <span>
                <i class="fas fa-times-circle text-muted me-2"></i> Requisitos Técnicos
              </span>
              <span class="badge bg-secondary">Pendente</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center px-0 border-0">
              <span>
                <i class="fas fa-times-circle text-muted me-2"></i> Acabamentos e Materiais
              </span>
              <span class="badge bg-secondary">Pendente</span>
            </li>
          </ul>
          <div class="text-center mt-3">
            <button class="btn btn-outline-primary btn-sm">
              <i class="fas fa-sync-alt me-1"></i> Revalidar Briefing
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.chat-container {
  display: flex;
  flex-direction: column;
}

.chat-message {
  max-width: 85%;
  margin-bottom: 15px;
  display: flex;
  flex-direction: column;
}

.ai-message {
  align-self: flex-start;
}

.user-message {
  align-self: flex-end;
  text-align: right;
}

.chat-bubble {
  padding: 10px 15px;
  border-radius: 18px;
  position: relative;
  display: inline-block;
  max-width: 100%;
}

.ai-message .chat-bubble {
  background-color: #f8f9fa;
  border: 1px solid #dee2e6;
  border-bottom-left-radius: 5px;
  text-align: left;
}

.user-message .chat-bubble {
  background-color: #e9f3ff;
  border: 1px solid #cce5ff;
  border-bottom-right-radius: 5px;
  text-align: left;
}

.chat-message small {
  margin-top: 5px;
  font-size: 0.7rem;
}
</style>
{% endblock %}